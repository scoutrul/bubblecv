# Задачи проекта

## Текущий статус: ✅ ЗАВЕРШЕНО

## Проблема: Неправильный сброс игры

**Описание:** При сбросе игры (кнопка "Сбросить игру" или "Restart" в GameOver) возникали проблемы:
1. Бонусы не сбрасывались
2. Игра начиналась с 3 жизнями вместо максимальных 5
3. Дублирование логики сброса в двух местах

**Решение:** Централизация логики сброса в одном месте

### Исправления:

**1. Архитектура сброса:**
- `resetGame()` в `useApp.ts` - единственное место где происходит полный сброс
- `restartGame()` в `useModals.ts` - только очищает очередь модалок и вызывает `resetGame()`

**2. Логика полного сброса в `resetGame()`:**
- `bonuses.resetBonuses()` - сбрасывает разблокированные бонусы
- `startSession()` - сбрасывает достижения, опыт, уровень, жизни, посещенные пузыри, canvas
- `openWelcome()` - показывает приветственную модалку

**3. Исправление жизней:**
- При инициализации: `GAME_CONFIG.initialLives` (3 жизни)
- При сбросе: `GAME_CONFIG.maxLives` (5 жизней)
- Пользователь исправил это самостоятельно в `startSession()`

### Изменения:

**`src/composables/useApp.ts`:**
- Добавлен `bonuses.resetBonuses()` в `resetGame()`
- Добавлены комментарии для ясности архитектуры

**`src/composables/useModals.ts`:**
- Убрана дублирующая логика из `restartGame()`
- `restartGame()` теперь вызывает `resetGame()` из `useApp`
- Убран импорт `useBonuses` (больше не нужен)

### Финальная архитектура:

**Единая точка сброса:** `resetGame()` в `useApp.ts`
1. Сбрасывает бонусы
2. Вызывает `startSession()` который сбрасывает всё остальное
3. Показывает welcome модалку

**Два пути к сбросу:**
1. Кнопка "Сбросить игру" → `resetGame()` напрямую
2. GameOver "Restart" → `restartGame()` → очищает очередь → `resetGame()`

## Результат ✅

- ✅ Устранено дублирование логики сброса
- ✅ Бонусы корректно сбрасываются при любом типе сброса
- ✅ Игра начинается с правильным количеством жизней
- ✅ Единая архитектура для всех типов сброса
