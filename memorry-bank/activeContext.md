# üéØ –ê–∫—Ç–∏–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç: –ö–û–ú–ü–õ–ï–ö–°–ù–û–ï –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ü–†–û–ï–ö–¢–ê (Level 4)

## üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
- **–†–µ–∂–∏–º**: IMPLEMENT (BUILD MODE)
- **–§–∞–∑–∞**: –§–ê–ó–ê 2.1 –ó–ê–í–ï–†–®–ï–ù–ê ‚úÖ ‚Üí –§–ê–ó–ê 2.2 –ì–û–¢–û–í–ê –ö –°–¢–ê–†–¢–£ üöÄ
- **–ü—Ä–æ–≥—Ä–µ—Å—Å**: ~55% –æ—Ç –æ–±—â–µ–≥–æ –æ–±—ä–µ–º–∞ Level 4
- **–í—Ä–µ–º—è –ø–æ—Ç—Ä–∞—á–µ–Ω–æ**: ~10 —á–∞—Å–æ–≤ –∏–∑ –ø–ª–∞–Ω–∏—Ä—É–µ–º—ã—Ö 20-25 —á–∞—Å–æ–≤

## üéâ –§–ê–ó–ê 2.1: –£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù–ê

### üìà –û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
‚úÖ **Unit —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö 5 Pinia Stores**: 126/140 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—à–ª–∏ (**90% —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏**)

| Store | –†–µ–∑—É–ª—å—Ç–∞—Ç | –£—Å–ø–µ—à–Ω–æ—Å—Ç—å | –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ |
|-------|-----------|------------|-------------|
| `bubble.store.ts` | 26/26 ‚úÖ | **100%** | Perfect coverage |
| `game.store.ts` | 18/21 ‚úÖ | **85.7%** | 3 spy issues |
| `modal.store.ts` | 31/35 ‚úÖ | **88.6%** | 4 timing tests |
| `session.store.ts` | 33/40 ‚úÖ | **82.5%** | 7 logic tests |
| `ui-event.store.ts` | 18/18 ‚úÖ | **100%** | Perfect coverage |

### üèóÔ∏è –ü–æ—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- ‚úÖ **Comprehensive –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤—Å–µ—Ö store dependencies
- ‚úÖ **MSW API handlers** –¥–ª—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- ‚úÖ **Edge cases coverage** –≤–∫–ª—é—á–∞—è null/undefined states
- ‚úÖ **Performance testing** –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏** –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö use cases

### üéØ –ü–æ–∫—Ä—ã—Ç—ã–µ –æ–±–ª–∞—Å—Ç–∏
- ‚úÖ **State management**: –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö stores
- ‚úÖ **API integration**: MSW handlers –¥–ª—è –≤—Å–µ—Ö endpoints
- ‚úÖ **XP/Achievement —Å–∏—Å—Ç–µ–º—ã**: comprehensive testing
- ‚úÖ **Modal management**: stack –∏ queue —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ **UI events**: shake queue –∏ performance

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ô –®–ê–ì: –§–ê–ó–ê 2.2

### üß© –ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ composables
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: Canvas & Physics –ª–æ–≥–∏–∫–∞ (6-8 —á–∞—Å–æ–≤)
- [ ] `useBubbleManager.ts` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ lifecycle –ø—É–∑—ã—Ä–µ–π
- [ ] `usePhysicsSimulation.ts` - —Ñ–∏–∑–∏–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è –∏ –∫–æ–ª–ª–∏–∑–∏–π
- [ ] `useCanvasRenderer.ts` - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
- [ ] `useCanvasEffects.ts` - GSAP –∞–Ω–∏–º–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ—Ö–æ–¥—ã
- [ ] `useCanvasInteraction.ts` - –∫–ª–∏–∫–∏, hover, drag

### üé™ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Å–ª–µ–¥—É—é—â–µ–π —Ñ–∞–∑—ã
- **Canvas API mocking** - —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ
- **GSAP mocking** - –≥–æ—Ç–æ–≤ –¥–ª—è instant animations
- **Physics testing** - –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å
- **Performance benchmarks** - –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö rendering loops

## üé® –ö–æ–¥–æ–≤–æ–µ –Ω–∞—Å–ª–µ–¥–∏–µ

### üì¶ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã
```
src/stores/
‚îú‚îÄ‚îÄ bubble.store.test.ts      (26 —Ç–µ—Å—Ç–æ–≤) ‚úÖ
‚îú‚îÄ‚îÄ game.store.test.ts        (21 —Ç–µ—Å—Ç–æ–≤) ‚úÖ 
‚îú‚îÄ‚îÄ modal.store.test.ts       (35 —Ç–µ—Å—Ç–æ–≤) ‚úÖ
‚îú‚îÄ‚îÄ session.store.test.ts     (40 —Ç–µ—Å—Ç–æ–≤) ‚úÖ
‚îî‚îÄ‚îÄ ui-event.store.test.ts    (18 —Ç–µ—Å—Ç–æ–≤) ‚úÖ

src/test/
‚îú‚îÄ‚îÄ infrastructure.test.ts    (15 —Ç–µ—Å—Ç–æ–≤) ‚úÖ
‚îú‚îÄ‚îÄ helpers/
‚îÇ   ‚îú‚îÄ‚îÄ pinia-helpers.ts      (Store testing utils)
‚îÇ   ‚îú‚îÄ‚îÄ canvas-helpers.ts     (Canvas API mocks)
‚îÇ   ‚îî‚îÄ‚îÄ gsap-helpers.ts       (GSAP testing utils)
‚îú‚îÄ‚îÄ fixtures/
‚îÇ   ‚îú‚îÄ‚îÄ bubbles.ts           (Test bubble data)
‚îÇ   ‚îú‚îÄ‚îÄ achievements.ts      (Achievement fixtures)
‚îÇ   ‚îî‚îÄ‚îÄ philosophy-questions.ts (Question data)
‚îî‚îÄ‚îÄ mocks/
    ‚îú‚îÄ‚îÄ api-handlers.ts      (MSW REST handlers)
    ‚îî‚îÄ‚îÄ server.ts           (MSW server setup)
```

### ‚öôÔ∏è –ö–ª—é—á–µ–≤—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è
- **Vitest + MSW**: —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–µ API –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Pinia testing**: –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ stores
- **Canvas/GSAP mocking**: performance-friendly unit testing
- **Comprehensive fixtures**: –ø–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö edge cases

## üîÆ –û–∂–∏–¥–∞–Ω–∏—è –¥–ª—è –§–ê–ó–´ 2.2

### üìä –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- ~25-30 –Ω–æ–≤—ã—Ö unit —Ç–µ—Å—Ç–æ–≤ –¥–ª—è composables
- –ü–æ–∫—Ä—ã—Ç–∏–µ Canvas rendering –ª–æ–≥–∏–∫–∏ 
- Physics simulation testing
- GSAP animation testing —Å instant completion
- Performance benchmarking –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π

### üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞
- **80%+ —É—Å–ø–µ—à–Ω–æ—Å—Ç—å** —Ç–µ—Å—Ç–æ–≤ composables
- **Canvas API –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–∫—Ä—ã—Ç** –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- **Physics tests deterministic** - –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- **GSAP animations tested** –±–µ–∑ timing dependencies

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –§–ê–ó–ê 2.1 –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —Å –æ—Ç–ª–∏—á–Ω—ã–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏*

## üìã –ê–∫—Ç–∏–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ä–∞–±–æ—Ç—ã

## üéØ –¢–µ–∫—É—â–∏–π —Ñ–æ–∫—É—Å: –ö–û–ú–ü–õ–ï–ö–°–ù–û–ï –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ü–†–û–ï–ö–¢–ê

**–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞**: 2024-12-28  
**–¢–∏–ø –∑–∞–¥–∞—á–∏**: Level 4 (–ö—Ä—É–ø–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –∑–∞–¥–∞—á–∞)  
**–°—Ç–∞—Ç—É—Å**: –§–ê–ó–ê 1 –ó–ê–í–ï–†–®–ï–ù–ê ‚úÖ - –≥–æ—Ç–æ–≤–∞ –∫ –§–ê–ó–ï 2 üöÄ  

### üìù –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Ç–µ—Å—Ç–æ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è —Ñ–∏–∫—Å–∞—Ü–∏–∏ —Ç–µ–∫—É—â–µ–≥–æ —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞. –ü—Ä–æ–µ–∫—Ç –¥–æ—Å—Ç–∏–≥ —Ö–æ—Ä–æ—à–µ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è, –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞–º–∏.

### üé™ –ß—Ç–æ –±—É–¥–µ—Ç –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ
- **Unit —Ç–µ—Å—Ç—ã**: 5 Pinia stores + 6 –∫–ª—é—á–µ–≤—ã—Ö composables
- **Integration —Ç–µ—Å—Ç—ã**: API –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ + Store-Component –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è  
- **E2E —Ç–µ—Å—Ç—ã**: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö Playwright —Ç–µ—Å—Ç–æ–≤
- **Performance —Ç–µ—Å—Ç—ã**: Canvas —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ + GSAP –∞–Ω–∏–º–∞—Ü–∏–∏
- **Visual regression**: Screenshot —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ UI —Å–æ—Å—Ç–æ—è–Ω–∏–π

### üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```
üìÅ –¢–µ—Å—Ç–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
‚îú‚îÄ‚îÄ üîß Vitest (Unit) + Vue Test Utils  
‚îú‚îÄ‚îÄ üîó Integration —Ç–µ—Å—Ç—ã (API + Components)
‚îú‚îÄ‚îÄ üñ•Ô∏è Playwright (E2E + Visual)
‚îú‚îÄ‚îÄ üé≠ Canvas/GSAP –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îî‚îÄ‚îÄ üìä Coverage reporting
```

### üìä –§–∞–∑—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
1. **üîß –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞** (4-6 —á) - ‚úÖ –ó–ê–í–ï–†–®–ï–ù–ê 
2. **üß™ Unit —Ç–µ—Å—Ç—ã** (8-10 —á) - üöÄ –ì–û–¢–û–í–ê –ö –°–¢–ê–†–¢–£ - Stores + Composables
3. **üîó Integration** (6-8 —á) - API + Performance —Ç–µ—Å—Ç—ã  
4. **üñ•Ô∏è Component & E2E** (8-12 —á) - Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã + —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ E2E
5. **üéØ –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ** (6-8 —á) - Accessibility + Cross-browser

**–û–±—â–µ–µ –≤—Ä–µ–º—è**: 32-44 —á–∞—Å–∞  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í—ã—Å–æ–∫–∏–π (—Ñ–∏–∫—Å–∞—Ü–∏—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è)

### üéØ –î–ï–¢–ê–õ–¨–ù–´–ô –ü–õ–ê–ù –¢–ï–ö–£–©–ï–ô –§–ê–ó–´

**–§–ê–ó–ê 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–ê
```
üìã –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞:
‚úÖ Dependencies —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã: @pinia/testing, @vitest/coverage-v8, msw
‚úÖ Vitest –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ vite.config.ts –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
‚úÖ Setup —Ñ–∞–π–ª —Å Canvas, GSAP, Pinia –º–æ–∫–∞–º–∏ —Å–æ–∑–¥–∞–Ω
‚úÖ Pinia testing helpers –≥–æ—Ç–æ–≤—ã (isolate, fixtures, snapshots)
‚úÖ Canvas/GSAP utilities —Å–æ–∑–¥–∞–Ω—ã (mocks, helpers, utils)
‚úÖ MSW server setup –∏ —Ñ–∏–∫—Å—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –≥–æ—Ç–æ–≤—ã
‚úÖ Coverage reporting –∏ npm scripts –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

üìä –†–µ–∑—É–ª—å—Ç–∞—Ç: 15/15 —Ç–µ—Å—Ç–æ–≤ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ
```

### üéØ –¶–µ–ª—å
–û–±–µ—Å–ø–µ—á–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –±—É–¥—É—â–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π —á–µ—Ä–µ–∑ comprehensive test suite, –ø–æ–∫—Ä—ã–≤–∞—é—â–∏–π –≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ –∞—Å–ø–µ–∫—Ç—ã:
- –ò–≥—Ä–æ–≤—É—é –ª–æ–≥–∏–∫—É (–ø—É–∑—ã—Ä–∏, —Ñ–∏–∑–∏–∫–∞, XP)
- UI —Å–∏—Å—Ç–µ–º—É (–º–æ–¥–∞–ª–∫–∏, HUD, –∞–Ω–∏–º–∞—Ü–∏–∏)  
- Backend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é (API, –¥–∞–Ω–Ω—ã–µ)
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (Canvas, GSAP)

---

## üìö –ö–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ Memory Bank

**–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏**:
- ‚úÖ –ó–≤–µ–∑–¥–Ω–æ–µ –Ω–µ–±–æ —Å GSAP (2024-08-03)
- ‚úÖ –§–∏–∫—Å –±–∞–≥–æ–≤ HUD –∏ –∫—Ä–µ–ø–∫–∏—Ö –ø—É–∑—ã—Ä–µ–π (2024-08-02)  
- ‚úÖ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω (2024-08-01)

**–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–ª–∞–Ω—ã**:
- üóÉÔ∏è –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å—Ö–µ–º—ã –ø—É–∑—ã—Ä–µ–π (Level 4) - –æ—Ç–ª–æ–∂–µ–Ω–æ –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**:
- Vue 3 + TypeScript + Vite
- Pinia stores –¥–ª—è state management
- Canvas –∏–≥—Ä–∞ —Å GSAP –∞–Ω–∏–º–∞—Ü–∏—è–º–∏
- Playwright E2E —Ç–µ—Å—Ç—ã (–±–∞–∑–æ–≤—ã–µ)
- Node.js/Express backend 